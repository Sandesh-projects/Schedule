<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Schedule Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B'
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto p-4 max-w-7xl">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Study Schedule Tracker</h1>
                    <p class="text-gray-600 mt-1">Sandeshkumar Yadav - 8 Week Intensive Program</p>
                </div>
                <div class="mt-4 md:mt-0 flex flex-col items-start md:items-end">
                    <div class="text-sm text-gray-500" id="currentDate"></div>
                    <div class="text-lg font-semibold text-primary" id="weekDisplay"></div>
                    <div class="text-xs text-gray-400" id="daysStudied"></div>
                </div>
            </div>
        </div>

        <!-- Progress Overview -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <!-- DSA Card -->
            <div class="bg-white rounded-lg shadow-md p-4 flex flex-col">
                <h3 class="text-sm font-semibold text-gray-600 mb-2">DSA Problems</h3>
                <div class="flex-grow flex items-center justify-between">
                    <button onclick="decrement('dsa')" class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300">-</button>
                    <div class="text-2xl font-bold text-primary" id="dsaProgress">0/150</div>
                    <button onclick="increment('dsa')" class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300">+</button>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                    <div class="bg-primary h-2 rounded-full" id="dsaProgressBar" style="width: 0%"></div>
                </div>
            </div>
            <!-- SQL Card -->
            <div class="bg-white rounded-lg shadow-md p-4 flex flex-col">
                <h3 class="text-sm font-semibold text-gray-600 mb-2">SQL Sprint</h3>
                 <div class="flex-grow flex items-center justify-between">
                    <button onclick="decrement('sql')" class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300">-</button>
                    <div class="text-2xl font-bold text-secondary" id="sqlProgress">0/50</div>
                    <button onclick="increment('sql')" class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300">+</button>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                    <div class="bg-secondary h-2 rounded-full" id="sqlProgressBar" style="width: 0%"></div>
                </div>
            </div>
            <!-- Project Hours Card -->
            <div class="bg-white rounded-lg shadow-md p-4 flex flex-col">
                <h3 class="text-sm font-semibold text-gray-600 mb-2">Project Hours</h3>
                 <div class="flex-grow flex items-center justify-between">
                    <button onclick="decrement('project')" class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300">-</button>
                    <div class="text-2xl font-bold text-accent" id="projectProgress">0/32h</div>
                    <button onclick="increment('project')" class="w-8 h-8 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300">+</button>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                    <div class="bg-accent h-2 rounded-full" id="projectProgressBar" style="width: 0%"></div>
                </div>
            </div>
            <!-- Current Phase Card -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h3 class="text-sm font-semibold text-gray-600 mb-2">Current Phase</h3>
                <div class="text-2xl font-bold text-purple-600" id="currentWeekNum">1</div>
                <div class="text-sm text-gray-500 mt-1" id="phaseStatus">Foundation</div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="bg-white rounded-lg shadow-md mb-6">
            <div class="flex flex-wrap border-b border-gray-200">
                <button class="tab-button px-4 sm:px-6 py-3 text-sm font-medium border-b-2 border-primary text-primary" data-tab="today">
                    Today
                </button>
                <button class="tab-button px-4 sm:px-6 py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="week">
                    Weekly
                </button>
                <button class="tab-button px-4 sm:px-6 py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="milestones">
                    Milestones
                </button>
                <button class="tab-button px-4 sm:px-6 py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="progress">
                    Log
                </button>
            </div>

            <!-- Today's Schedule Tab -->
            <div id="today-tab" class="tab-content p-4 sm:p-6">
                <h2 class="text-xl font-bold mb-4" id="todayScheduleTitle">Today's Schedule</h2>
                <div id="todaySchedule" class="space-y-4">
                    <!-- Schedule items will be populated here -->
                </div>
            </div>

            <!-- Weekly View Tab -->
            <div id="week-tab" class="tab-content p-4 sm:p-6 hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2">
                    <h2 class="text-xl font-bold">Weekly Schedule</h2>
                    <select id="weekSelector" class="border rounded-md px-3 py-1 w-full sm:w-auto">
                        <option value="1">Week 1</option>
                        <option value="2">Week 2</option>
                        <option value="3">Week 3</option>
                        <option value="4">Week 4</option>
                        <option value="5">Week 5</option>
                        <option value="6">Week 6</option>
                        <option value="7">Week 7</option>
                        <option value="8">Week 8</option>
                    </select>
                </div>
                <div id="weeklySchedule" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-2">
                    <!-- Weekly schedule will be populated here -->
                </div>
            </div>

            <!-- Milestones Tab -->
            <div id="milestones-tab" class="tab-content p-4 sm:p-6 hidden">
                <h2 class="text-xl font-bold mb-4">8-Week Milestones</h2>
                <div id="milestonesList" class="space-y-4">
                    <!-- Milestones will be populated here -->
                </div>
            </div>

            <!-- Progress Log Tab -->
            <div id="progress-tab" class="tab-content p-4 sm:p-6 hidden">
                <h2 class="text-xl font-bold mb-4">Daily Progress Log</h2>
                <div class="mb-4">
                    <textarea id="progressInput" placeholder="What did you accomplish today? What blocked you? What's tomorrow's plan?" class="w-full p-3 border rounded-md h-24 resize-none"></textarea>
                    <button onclick="saveLog()" class="mt-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-600">
                        Save Today's Log
                    </button>
                </div>
                <div id="progressHistory" class="space-y-4">
                    <!-- Progress history will be populated here -->
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-lg shadow-md p-6 text-center">
             <button onclick="resetProgress()" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600">
                    Reset All Progress
            </button>
        </div>
    </div>

    <script>
        // --- DATA STRUCTURE ---
        const scheduleData = {
            startDate: new Date('2025-08-17T00:00:00'),
            weekTemplates: {
                shortDay: [ // Monday, Tuesday, Thursday
                    { start: "17:30", end: "18:15", activity: "Java DSA (NeetCode 1 problem)", priority: "high" },
                    { start: "18:15", end: "19:30", activity: "SQL sprint / practice", priority: "high" },
                    { start: "19:30", end: "19:45", activity: "Break (walk/stretch)", priority: "low" },
                    { start: "19:45", end: "20:45", activity: "Quants practice", priority: "high", isQuant: true },
                    { start: "20:45", end: "21:30", activity: "JavaScript fundamentals / Git micro-session", priority: "medium" },
                    { start: "21:30", end: "22:15", activity: "Dinner (blocked)", priority: "none" },
                    { start: "22:15", end: "24:00", activity: "Deep focus: React / Node / Project", priority: "high" }
                ],
                longDay: [ // Wednesday, Friday
                    { start: "15:30", end: "16:15", activity: "Java DSA (NeetCode 1 problem)", priority: "high" },
                    { start: "16:15", end: "17:45", activity: "React / JavaScript practice", priority: "high" },
                    { start: "17:45", end: "18:00", activity: "Break", priority: "low" },
                    { start: "18:00", end: "19:00", activity: "SQL practice or Quants", priority: "high", isQuant: true },
                    { start: "19:00", end: "20:00", activity: "Quants / DI / Logical Reasoning", priority: "high" },
                    { start: "20:00", end: "21:00", activity: "JS / Node micro-practice or Verbal practice", priority: "medium" },
                    { start: "21:00", end: "21:30", activity: "Short break / light review", priority: "low" },
                    { start: "21:30", end: "22:15", activity: "Dinner (blocked)", priority: "none" },
                    { start: "22:15", end: "24:00", activity: "Project / Deep practice / Catch up", priority: "high" }
                ],
                saturday: [
                    { start: "10:00", end: "13:00", activity: "Major project deep work (3h)", priority: "highest" },
                    { start: "13:00", end: "14:00", activity: "Lunch / rest", priority: "none" },
                    { start: "14:00", end: "15:00", activity: "Project wrap / Git commits / docs (1h)", priority: "high" },
                    { start: "16:00", end: "18:00", activity: "React & Node combined exercise or catch-up", priority: "medium" }
                ],
                sunday: [
                    { start: "10:00", end: "13:00", activity: "College syllabus (mandatory)", priority: "high" },
                    { start: "14:00", end: "15:30", activity: "Mock quant / DI practice", priority: "high", isQuant: true },
                    { start: "16:00", end: "17:00", activity: "Weekly review & planning", priority: "medium" },
                    { start: "17:00", end: "19:00", activity: "Optional light revision / rest", priority: "low" }
                ]
            },
            milestones: [
                { phase: "Foundation", goal: "Complete SQL sprint (50 problems) + Establish daily DSA habit", dependencies: ["sql_complete", "dsa_habit"] },
                { phase: "JavaScript Mastery", goal: "Master JS fundamentals + Start React basics", dependencies: ["js_fundamentals", "react_start"] },
                { phase: "React Development", goal: "React intermediate (hooks) + Begin Node.js", dependencies: ["react_hooks", "node_basics"] },
                { phase: "Full Stack Integration", goal: "Integrate Node backend + Add Tailwind UI + Build project", dependencies: ["fullstack_project", "ui_styling"] },
                { phase: "Project Refinement", goal: "Polish project + Documentation + Prepare for AI&DS", dependencies: ["project_polish", "documentation"] },
                { phase: "Deployment & DevOps", goal: "AWS deployment + CI/CD pipeline setup", dependencies: ["aws_deploy", "cicd_setup"] },
                { phase: "Interview Preparation", goal: "Mock interviews + Portfolio polish + System design", dependencies: ["mock_interviews", "portfolio_ready"] },
                { phase: "AI & Data Science", goal: "Complete all prerequisites + Start AI&DS learning path", dependencies: ["all_complete", "aids_ready"] }
            ],
            quantsRotation: {
                1: "Number System, Percentages & Ratios", // Monday
                2: "Time, Speed, Distance & Time & Work", // Tuesday
                3: "Permutations, Probability", // Wednesday
                4: "Algebra, Progressions", // Thursday
                5: "Geometry & Mensuration", // Friday
                6: "Mixed practice / difficult topics", // Saturday
                0: "Mock DI / Data Interpretation" // Sunday
            }
        };

        // --- STATE MANAGEMENT (localStorage) ---
        const defaultProgress = {
            dsaProblems: 0,
            sqlProblems: 0,
            projectHours: 0,
            dailyLogs: {},
            completedTasks: {},
            milestoneStatus: {
                sql_complete: false, dsa_habit: false, js_fundamentals: false, react_start: false,
                react_hooks: false, node_basics: false, fullstack_project: false, ui_styling: false,
                project_polish: false, documentation: false, aws_deploy: false, cicd_setup: false,
                mock_interviews: false, portfolio_ready: false, all_complete: false, aids_ready: false
            },
        };

        let progress = {};

        function loadProgress() {
            const savedProgress = localStorage.getItem('studyTrackerProgress');
            if (savedProgress) {
                const parsed = JSON.parse(savedProgress);
                progress = { ...defaultProgress, ...parsed };
                progress.milestoneStatus = { ...defaultProgress.milestoneStatus, ...parsed.milestoneStatus };
            } else {
                progress = JSON.parse(JSON.stringify(defaultProgress));
            }
        }

        function saveProgressData() {
            localStorage.setItem('studyTrackerProgress', JSON.stringify(progress));
            updateProgressDisplay();
        }

        // --- UI UPDATE FUNCTIONS ---
        function updateProgressDisplay() {
            document.getElementById('dsaProgress').textContent = `${progress.dsaProblems}/150`;
            document.getElementById('dsaProgressBar').style.width = `${Math.min((progress.dsaProblems / 150) * 100, 100)}%`;

            document.getElementById('sqlProgress').textContent = `${progress.sqlProblems}/50`;
            document.getElementById('sqlProgressBar').style.width = `${(progress.sqlProblems / 50) * 100}%`;

            document.getElementById('projectProgress').textContent = `${progress.projectHours.toFixed(1)}/32h`;
            document.getElementById('projectProgressBar').style.width = `${Math.min((progress.projectHours / 32) * 100, 100)}%`;

            updateMilestoneStatus();
            const currentPhase = getCurrentPhase();
            document.getElementById('currentWeekNum').textContent = currentPhase.index;
            document.getElementById('phaseStatus').textContent = currentPhase.phase;
            document.getElementById('weekDisplay').textContent = `Phase ${currentPhase.index}: ${currentPhase.phase}`;
        }

        function updateMilestoneStatus() {
            progress.milestoneStatus.sql_complete = progress.sqlProblems >= 50;
            progress.milestoneStatus.dsa_habit = progress.dsaProblems >= 7;
        }

        // --- DATE & SCHEDULE LOGIC ---
        function getDaysStudied() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const start = new Date(scheduleData.startDate.getFullYear(), scheduleData.startDate.getMonth(), scheduleData.startDate.getDate());
            return Math.max(0, Math.floor((today - start) / (1000 * 60 * 60 * 24)));
        }

        function getCurrentPhase() {
            for (let i = 0; i < scheduleData.milestones.length; i++) {
                if (!scheduleData.milestones[i].dependencies.every(dep => progress.milestoneStatus[dep])) {
                    return { phase: scheduleData.milestones[i].phase, index: i + 1 };
                }
            }
            return { phase: "Completed", index: scheduleData.milestones.length + 1 };
        }

        function getDayType(dayOfWeek) {
            if ([1, 2, 4].includes(dayOfWeek)) return 'shortDay';
            if ([3, 5].includes(dayOfWeek)) return 'longDay';
            return dayOfWeek === 6 ? 'saturday' : 'sunday';
        }

        // --- DISPLAY FUNCTIONS ---
        function displayTodaySchedule() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const dayType = getDayType(dayOfWeek);
            const schedule = scheduleData.weekTemplates[dayType];
            const dateKey = today.toISOString().split('T')[0];

            document.getElementById('todayScheduleTitle').textContent = `Today's Schedule (${today.toLocaleDateString('en-US', { weekday: 'long' })})`;
            const scheduleContainer = document.getElementById('todaySchedule');
            scheduleContainer.innerHTML = '';

            if (schedule) {
                schedule.forEach((item, index) => {
                    const taskId = `${dateKey}-${index}`;
                    scheduleContainer.appendChild(createTaskElement(item, taskId, dayOfWeek));
                });
            }
        }

        function displayWeeklySchedule(weekNumber = 1) {
            const weeklyContainer = document.getElementById('weeklySchedule');
            weeklyContainer.innerHTML = '';
            const weekStartDate = new Date(scheduleData.startDate);
            weekStartDate.setDate(weekStartDate.getDate() + (weekNumber - 1) * 7);
            const todayKey = new Date().toISOString().split('T')[0];
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

            for (let i = 0; i < 7; i++) {
                const dayDate = new Date(weekStartDate);
                dayDate.setDate(dayDate.getDate() + i);
                const dateKey = dayDate.toISOString().split('T')[0];
                const isToday = dateKey === todayKey;

                const dayColumn = document.createElement('div');
                dayColumn.className = `bg-gray-100 p-2 rounded-lg flex flex-col gap-2 ${isToday ? 'border-2 border-primary' : ''}`;
                dayColumn.innerHTML = `<h3 class="font-bold text-center text-sm pb-1 border-b">${days[i]} <span class="text-gray-500 font-normal">${dayDate.getDate()}</span></h3>`;

                const schedule = scheduleData.weekTemplates[getDayType(dayDate.getDay())];
                if (schedule) {
                    schedule.forEach((item, index) => {
                        const taskId = `${dateKey}-${index}`;
                        dayColumn.appendChild(createTaskElement(item, taskId, dayDate.getDay(), true));
                    });
                }
                weeklyContainer.appendChild(dayColumn);
            }
        }

        function createTaskElement(item, taskId, dayOfWeek, isWeeklyView = false) {
            const isCompleted = progress.completedTasks[taskId] || false;
            const priorityClasses = {
                'highest': 'border-l-red-500 bg-red-50', 'high': 'border-l-blue-500 bg-blue-50',
                'medium': 'border-l-yellow-500 bg-yellow-50', 'low': 'border-l-gray-400 bg-gray-50',
                'none': 'border-l-gray-300 bg-white'
            };
            const taskElement = document.createElement('div');
            let activityText = item.activity;
            if (item.isQuant) {
                activityText = `${item.activity}: <span class="font-semibold text-purple-700">${scheduleData.quantsRotation[dayOfWeek]}</span>`;
            }

            if (isWeeklyView) {
                taskElement.className = `p-2 rounded-md text-xs cursor-pointer ${priorityClasses[item.priority].replace('border-l-4', '')} ${isCompleted ? 'opacity-60' : ''}`;
                taskElement.innerHTML = `
                    <div class="flex items-start gap-2">
                        <input type="checkbox" id="${taskId}" ${isCompleted ? 'checked' : ''} onchange="toggleTask('${taskId}')" class="mt-0.5">
                        <label for="${taskId}" class="${isCompleted ? 'line-through' : ''}">${item.activity}</label>
                    </div>
                    <div class="text-gray-500 text-right">${item.start}</div>`;
            } else {
                taskElement.className = `border-l-4 p-4 rounded-r-md flex items-start gap-4 ${priorityClasses[item.priority]} ${isCompleted ? 'opacity-60' : ''}`;
                taskElement.innerHTML = `
                    <input type="checkbox" id="${taskId}" ${isCompleted ? 'checked' : ''} onchange="toggleTask('${taskId}')" class="w-5 h-5 text-blue-600 mt-1 flex-shrink-0 cursor-pointer">
                    <div class="flex-1">
                        <label for="${taskId}" class="font-semibold text-gray-800 cursor-pointer">${item.start} - ${item.end}</label>
                        <p class="mt-1 text-gray-700 ${isCompleted ? 'line-through' : ''}">${activityText}</p>
                    </div>`;
            }
            return taskElement;
        }

        function displayMilestones() {
            const milestonesContainer = document.getElementById('milestonesList');
            milestonesContainer.innerHTML = '';
            const currentPhase = getCurrentPhase();

            scheduleData.milestones.forEach((milestone, index) => {
                const allDepsComplete = milestone.dependencies.every(dep => progress.milestoneStatus[dep]);
                const isCurrent = index === currentPhase.index - 1 && !allDepsComplete;
                const milestoneElement = document.createElement('div');
                milestoneElement.className = `p-4 rounded-md border ${allDepsComplete ? 'bg-green-50 border-green-200' : isCurrent ? 'bg-blue-50 border-blue-200' : 'bg-gray-50 border-gray-200'}`;
                const depsHtml = milestone.dependencies.map(dep => `
                    <div class="flex items-center gap-2 text-sm">
                        <input type="checkbox" id="dep-${dep}" ${progress.milestoneStatus[dep] ? 'checked' : ''} onchange="toggleMilestoneDep('${dep}')" class="w-4 h-4 text-blue-600">
                        <label for="dep-${dep}" class="${progress.milestoneStatus[dep] ? 'line-through text-gray-500' : 'text-gray-700'}">${dep.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</label>
                    </div>`).join('');

                milestoneElement.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold ${allDepsComplete ? 'bg-green-500 text-white' : isCurrent ? 'bg-blue-500 text-white' : 'bg-gray-300 text-gray-600'}">
                            ${allDepsComplete ? '✓' : index + 1}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-800">${milestone.phase} ${isCurrent ? '<span class="text-blue-600">(Current)</span>' : ''} ${allDepsComplete ? '<span class="text-green-600">(Complete)</span>' : ''}</h3>
                            <p class="text-gray-600 mt-1 mb-3">${milestone.goal}</p>
                            <div class="space-y-2">
                                <h4 class="text-sm font-medium text-gray-700">Prerequisites:</h4>
                                ${depsHtml}
                            </div>
                        </div>
                    </div>`;
                milestonesContainer.appendChild(milestoneElement);
            });
        }
        
        function displayProgressHistory() {
            const historyContainer = document.getElementById('progressHistory');
            historyContainer.innerHTML = '';
            const logs = Object.values(progress.dailyLogs).sort((a, b) => new Date(b.date) - new Date(a.date));
            if (logs.length === 0) {
                historyContainer.innerHTML = '<p class="text-gray-500 text-center">No progress logs yet.</p>';
                return;
            }
            logs.forEach(log => {
                const logElement = document.createElement('div');
                logElement.className = 'bg-gray-50 p-4 rounded-md border';
                logElement.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-800">${new Date(log.date).toDateString()}</h4>
                        <span class="text-xs text-gray-500">${new Date(log.timestamp).toLocaleTimeString()}</span>
                    </div>
                    <p class="text-gray-700 whitespace-pre-wrap">${log.log}</p>`;
                historyContainer.appendChild(logElement);
            });
        }

        // --- USER ACTIONS & EVENT HANDLERS ---
        function increment(metric) {
            if (metric === 'dsa') {
                progress.dsaProblems++;
            } else if (metric === 'sql') {
                progress.sqlProblems = Math.min(progress.sqlProblems + 1, 50);
            } else if (metric === 'project') {
                progress.projectHours = Math.min(progress.projectHours + 0.5, 32);
            }
            saveProgressData();
        }

        function decrement(metric) {
            if (metric === 'dsa') {
                progress.dsaProblems = Math.max(0, progress.dsaProblems - 1);
            } else if (metric === 'sql') {
                progress.sqlProblems = Math.max(0, progress.sqlProblems - 1);
            } else if (metric === 'project') {
                progress.projectHours = Math.max(0, progress.projectHours - 0.5);
            }
            saveProgressData();
        }
        
        function toggleTask(taskId) {
            progress.completedTasks[taskId] = !progress.completedTasks[taskId];
            saveProgressData();
            displayTodaySchedule();
            displayWeeklySchedule(document.getElementById('weekSelector').value);
        }

        function toggleMilestoneDep(depKey) {
            progress.milestoneStatus[depKey] = !progress.milestoneStatus[depKey];
            saveProgressData();
            displayMilestones();
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                progress = JSON.parse(JSON.stringify(defaultProgress));
                saveProgressData();
                init();
                showNotification('Progress reset successfully.');
            }
        }

        function saveLog() {
            const todayKey = new Date().toISOString().split('T')[0];
            const logText = document.getElementById('progressInput').value.trim();
            if (logText) {
                progress.dailyLogs[todayKey] = { date: todayKey, log: logText, timestamp: new Date().toISOString() };
                document.getElementById('progressInput').value = '';
                saveProgressData();
                displayProgressHistory();
                showNotification('Progress saved! 📝');
            }
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg z-50 transform transition-transform duration-300 translate-x-full';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => { notification.style.transform = 'translateX(0)'; }, 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(150%)';
                setTimeout(() => { document.body.removeChild(notification); }, 300);
            }, 3000);
        }

        function setupTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabName = button.dataset.tab;
                    tabButtons.forEach(btn => btn.classList.remove('border-primary', 'text-primary'));
                    button.classList.add('border-primary', 'text-primary');
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
                    document.getElementById(`${tabName}-tab`).classList.remove('hidden');
                    if (tabName === 'milestones') displayMilestones();
                    if (tabName === 'progress') displayProgressHistory();
                    if (tabName === 'week') displayWeeklySchedule(document.getElementById('weekSelector').value);
                });
            });
        }

        // --- INITIALIZATION ---
        function init() {
            document.getElementById('currentDate').textContent = new Date().toDateString();
            const daysStudied = getDaysStudied();
            document.getElementById('daysStudied').textContent = `Day ${daysStudied + 1}`;
            document.getElementById('weekSelector').value = Math.min(Math.floor(daysStudied / 7) + 1, 8);

            loadProgress();
            updateProgressDisplay();
            setupTabs();
            displayTodaySchedule();
            
            document.getElementById('weekSelector').addEventListener('change', (e) => {
                displayWeeklySchedule(e.target.value);
            });
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
